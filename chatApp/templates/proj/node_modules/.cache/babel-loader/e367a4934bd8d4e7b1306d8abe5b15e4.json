{"ast":null,"code":"import _classCallCheck from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{NavLink}from\"react-router-dom\";import axios from\"axios\";import React,{Component}from'react';import'./../assets/style.css';import groupUser from'./../assets/groupUser.png';import singleUser from'./../assets/singleUser.png';import'font-awesome/css/font-awesome.min.css';export var Contact=/*#__PURE__*/function(_Component){_inherits(Contact,_Component);var _super=_createSuper(Contact);function Contact(){var _this;_classCallCheck(this,Contact);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={chat:[],id:null,imgUrl:'',picFlag:''};_this.picFlag='';_this.getImageURL=function(name){try{var token=localStorage.getItem('token');axios.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(token)};axios.get(\"http://127.0.0.1:8000/chat/profile/\".concat(name,\"/\")).then(function(res){return res.data;}).then(function(res){if(res.length!==0)_this.picFlag=res[0].photo_url;else{_this.picFlag='false';}}).catch();// let url = ''\n// var token=localStorage.getItem('token')\n// var token = 'Token ' + localStorage.getItem('token');\n// var value = fetch(`http://localhost:8000/chat/profile/${name}`)\n//   .then(res => res.json())\n//   .then(res => {\n//     if (res.length !== 0)\n//       this.picFlag = res[0].photo_url\n//     else{this.picFlag='false'}\n//   }\n// ).catch(\n// )  \n}catch(_unused){_this.picFlag=singleUser;}return _this.picFlag;};_this.replaceAll=function(string,search,replace){return string.split(search).join(replace);};_this.getImageDetail=function(){var username=localStorage.getItem('username');var tempName=_this.props.chatURL;var itemNO=_this.props.chatURL.split('_').length;tempName=_this.replaceAll(tempName,'_',' ');var Name=_this.props.name;var len=Name.length;var url='';Name=Name.join(' ');Name=Name.replace(username,'');Name=_this.replaceAll(Name,' ','');if(len===1){if(itemNO>2){return groupUser;}return singleUser;}if(itemNO>2){return groupUser;}try{if(len<=2&username!==null&username!==undefined){url=_this.getImageURL(Name);localStorage.setItem(Name,url);}if(url===undefined||url==='false'||url===null){return singleUser;}}catch(_unused2){url=singleUser;}return url;};_this.getName=function(){var username=localStorage.getItem('username');var tempName=_this.props.chatURL;var itemNO=_this.props.chatURL.split('_').length;tempName=_this.replaceAll(tempName,'_',' ');if(username!==undefined&&username!==null&&username!=='')var tempUsername=localStorage.getItem('username').charAt(0).toUpperCase()+username.slice(1);tempName=tempName.replace(tempUsername,'');if(tempName.length>=10){tempName=tempName.slice(0,12)+'...';}if(itemNO>2){tempName+='[Group]';}// var username = localStorage.getItem('username')\n// var Name = this.props.name\n// var len = Name.length\n// Name = Name.map(item=> item.charAt(0).toUpperCase() + item.substr(1).toLowerCase())\n// var temp = localStorage.getItem('username').charAt(0).toUpperCase() + username.slice(1)  \n// Name = Name.join(' ')\n// Name = Name.replace(temp,'')\n// if (len > 2)\n// {\n//   Name+=' [Group]'\n// }\nreturn tempName;};_this.deleteChatRequest=function(chatId){var token=localStorage.getItem('token');axios.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(token)};axios.delete(\"http://127.0.0.1:8000/chat/chat/\".concat(chatId,\"/\")).then(function(res){return alert('chat has been removed');}).catch(console.log('Delettin failed'));window.location.replace('');};_this.deleteChat=function(e){var Name=_this.props.name;var len=Name.length;var chatId=_this.props.id;_this.deleteChatRequest(chatId);};return _this;}_createClass(Contact,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"wrapTry\",style:{fontSize:'15px'}},/*#__PURE__*/React.createElement(NavLink,{to:\"/\".concat(this.props.chatURL),style:{color:\"#fff\"}},/*#__PURE__*/React.createElement(\"li\",null,localStorage.getItem('token')!==null?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{style:{width:'50px',borderRadius:\"50%\",float:'left',marginRight:'0px'},src:this.getImageDetail()}),/*#__PURE__*/React.createElement(\"div\",{className:\"meta\"},/*#__PURE__*/React.createElement(\"p\",{className:\"name\"},this.getName())),/*#__PURE__*/React.createElement(\"button\",{className:\"deleteBtn\",onClick:this.deleteChat},\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash-alt \"}))):/*#__PURE__*/React.createElement(\"p\",null))),/*#__PURE__*/React.createElement(\"br\",null));}}]);return Contact;}(Component);export default Contact;","map":{"version":3,"sources":["E:/Programming/React/For Merging Chat-App/proj/src/components/Contact.js"],"names":["NavLink","axios","React","Component","groupUser","singleUser","Contact","state","chat","id","imgUrl","picFlag","getImageURL","name","token","localStorage","getItem","defaults","headers","Authorization","get","then","res","data","length","photo_url","catch","replaceAll","string","search","replace","split","join","getImageDetail","username","tempName","props","chatURL","itemNO","Name","len","url","undefined","setItem","getName","tempUsername","charAt","toUpperCase","slice","deleteChatRequest","chatId","delete","alert","console","log","window","location","deleteChat","e","fontSize","color","width","borderRadius","float","marginRight"],"mappings":"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","sourcesContent":["import { NavLink } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport React, { Component } from 'react'\r\nimport './../assets/style.css'\r\nimport groupUser from './../assets/groupUser.png'\r\nimport singleUser from './../assets/singleUser.png'\r\nimport 'font-awesome/css/font-awesome.min.css';\r\nexport class Contact extends Component {\r\n\r\n  state = {\r\n    \r\n    chat: [],\r\n    id:null,\r\n    imgUrl: '',\r\n    picFlag:''\r\n    \r\n    \r\n  }   \r\n  picFlag=''\r\n  getImageURL = (name) => {\r\n    try {\r\n      var token=localStorage.getItem('token')\r\n      axios.defaults.headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Token ${token}`\r\n      };\r\n      axios\r\n        .get(`http://127.0.0.1:8000/chat/profile/${name}/`)\r\n        .then(res => res.data)\r\n        .then(res => {\r\n          if (res.length !== 0)\r\n            this.picFlag = res[0].photo_url\r\n          else{this.picFlag='false'}\r\n        })\r\n        .catch(\r\n            \r\n          )  \r\n      \r\n      // let url = ''\r\n      // var token=localStorage.getItem('token')\r\n      // var token = 'Token ' + localStorage.getItem('token');\r\n      // var value = fetch(`http://localhost:8000/chat/profile/${name}`)\r\n      //   .then(res => res.json())\r\n  \r\n      //   .then(res => {\r\n      //     if (res.length !== 0)\r\n      //       this.picFlag = res[0].photo_url\r\n      //     else{this.picFlag='false'}\r\n      //   }\r\n      // ).catch(\r\n            \r\n      // )  \r\n    }\r\n    catch{this.picFlag=singleUser}\r\n    return this.picFlag\r\n    \r\n  }\r\n\r\n\r\n  replaceAll=(string, search, replace)=> {\r\n    return string.split(search).join(replace);\r\n  }\r\n\r\n\r\n  getImageDetail = () => {\r\n    var username = localStorage.getItem('username')\r\n    var tempName = this.props.chatURL\r\n    var itemNO = this.props.chatURL.split('_').length\r\n    tempName = this.replaceAll(tempName, '_', ' ')\r\n    \r\n    var Name = this.props.name\r\n    var len = Name.length\r\n    var url=''\r\n    Name=Name.join(' ')\r\n    Name = Name.replace(username, '')\r\n    Name = this.replaceAll(Name, ' ', '')\r\n\r\n    if (len === 1)\r\n    {\r\n      if (itemNO > 2)\r\n      {\r\n        return groupUser\r\n      }\r\n      return singleUser\r\n    }\r\n    \r\n    if (itemNO > 2)\r\n    {\r\n      return groupUser\r\n    }\r\n\r\n    try {\r\n      if (len <= 2 & username !== null & username !== undefined) {\r\n        url = this.getImageURL(Name)\r\n        localStorage.setItem(Name,url)      \r\n      }\r\n\r\n\r\n      if (url === undefined || url==='false'|| url ===null ) \r\n        {return singleUser}\r\n    }\r\n    catch{\r\n      url=singleUser\r\n    }\r\n   \r\n    return url\r\n\r\n  }\r\n \r\n  getName = () => {\r\n    var username = localStorage.getItem('username')\r\n    var tempName = this.props.chatURL\r\n    var itemNO = this.props.chatURL.split('_').length\r\n    tempName = this.replaceAll(tempName,'_',' ')\r\n    if (username !== undefined && username !== null && username !== '')\r\n      var tempUsername = localStorage.getItem('username').charAt(0).toUpperCase() + username.slice(1)  \r\n    \r\n    tempName = tempName.replace(tempUsername, '')\r\n    if (tempName.length >= 10)\r\n    {\r\n      tempName = tempName.slice(0, 12)+'...'\r\n      \r\n      }\r\n    if (itemNO > 2)\r\n    {\r\n      tempName += '[Group]'\r\n      \r\n    }\r\n    \r\n    // var username = localStorage.getItem('username')\r\n    // var Name = this.props.name\r\n    // var len = Name.length\r\n    // Name = Name.map(item=> item.charAt(0).toUpperCase() + item.substr(1).toLowerCase())\r\n    // var temp = localStorage.getItem('username').charAt(0).toUpperCase() + username.slice(1)  \r\n    // Name = Name.join(' ')\r\n    // Name = Name.replace(temp,'')\r\n    \r\n    // if (len > 2)\r\n    // {\r\n    //   Name+=' [Group]'\r\n    // }\r\n   \r\n    return tempName\r\n  }\r\n\r\n  //http://127.0.0.1:8000/chat/chat/40/\r\n\r\n  deleteChatRequest = (chatId) => {\r\n\r\n      var token=localStorage.getItem('token')\r\n      axios.defaults.headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Token ${token}`\r\n      };\r\n      axios\r\n        .delete(`http://127.0.0.1:8000/chat/chat/${chatId}/`)\r\n      .then(res => alert('chat has been removed')).catch(console.log('Delettin failed'));\r\n      window.location.replace('')\r\n    };\r\n  \r\n  deleteChat = (e) => {\r\n    var Name = this.props.name\r\n    var len = Name.length\r\n    var chatId = this.props.id\r\n    this.deleteChatRequest(chatId)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className='wrapTry' style={{fontSize:'15px'}}>\r\n        \r\n      <NavLink  to={`/${this.props.chatURL}`} style={{ color: \"#fff\" }}>      \r\n      <li   >\r\n        {localStorage.getItem('token') !== null ?\r\n              <div > \r\n            <img style={{\r\n                      width: '50px',\r\n                      borderRadius: \"50%\",\r\n                      float: 'left',\r\n                      marginRight: '0px'\r\n                }}\r\n                  src={this.getImageDetail()}\r\n                />\r\n                \r\n                <div className=\"meta\">\r\n                  <p className=\"name\" >   \r\n                    {this.getName()}      \r\n                  </p>\r\n                </div>\r\n               \r\n                <button className='deleteBtn' onClick={this.deleteChat}> <i className=\"fas fa-trash-alt \"></i></button>\r\n            \r\n        </div>\r\n          :\r\n    <p></p> \r\n        } \r\n</li>\r\n        </NavLink>\r\n        <br/>\r\n</div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Contact;\r\n"]},"metadata":{},"sourceType":"module"}