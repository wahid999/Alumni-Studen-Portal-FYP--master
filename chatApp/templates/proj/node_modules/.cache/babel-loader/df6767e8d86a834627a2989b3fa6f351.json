{"ast":null,"code":"import _toConsumableArray from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Programming\\\\React\\\\For Merging Chat-App\\\\proj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Form,Button,Select}from\"antd\";import axios from\"axios\";import{connect}from\"react-redux\";import{withRouter}from\"react-router-dom\";import*as navActions from\"../store/actions/nav\";import*as messageActions from\"../store/actions/message\";var FormItem=Form.Item;function hasErrors(fieldsError){return Object.keys(fieldsError).some(function(field){return fieldsError[field];});}var HorizontalAddChatForm=/*#__PURE__*/function(_React$Component){_inherits(HorizontalAddChatForm,_React$Component);var _super=_createSuper(HorizontalAddChatForm);function HorizontalAddChatForm(){var _this;_classCallCheck(this,HorizontalAddChatForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={usernames:[],error:null};_this.handleChange=function(value){_this.setState({usernames:value});};_this.handleSubmit=function(e){var usernames=_this.state.usernames;e.preventDefault();_this.props.form.validateFields(function(err,values){if(!err){var combined=[].concat(_toConsumableArray(usernames),[_this.props.username]);console.log(combined);axios.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(_this.props.token)};axios.post(\"http://127.0.0.1:8000/chat/create/\",{messages:[],participants:combined}).then(function(res){_this.props.history.push(\"/\".concat(res.data.memebers_name));_this.props.closeAddChatPopup();_this.props.getUserChats(_this.props.username,_this.props.token);}).catch(function(err){console.error(err);_this.setState({error:\"username doesn't exist.....! \"});});}});};return _this;}_createClass(HorizontalAddChatForm,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.form.validateFields();}},{key:\"render\",value:function render(){var _this$props$form=this.props.form,getFieldDecorator=_this$props$form.getFieldDecorator,getFieldsError=_this$props$form.getFieldsError,getFieldError=_this$props$form.getFieldError,isFieldTouched=_this$props$form.isFieldTouched;var userNameError=isFieldTouched(\"userName\")&&getFieldError(\"userName\");return/*#__PURE__*/React.createElement(Form,{layout:\"inline\",onSubmit:this.handleSubmit},this.state.error?\"\".concat(this.state.error):null,/*#__PURE__*/React.createElement(FormItem,{validateStatus:userNameError?\"error\":\"\",help:userNameError||\"\"},getFieldDecorator(\"userName\",{rules:[{required:true,message:\"Please input the username of the person you want to chat with\"}]})(/*#__PURE__*/React.createElement(Select,{mode:\"tags\",style:{width:\"100%\"},placeholder:\"Tags Mode\",onChange:this.handleChange},[]))),/*#__PURE__*/React.createElement(FormItem,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",disabled:hasErrors(getFieldsError())},\"Start a chat\")));}}]);return HorizontalAddChatForm;}(React.Component);var AddChatForm=Form.create()(HorizontalAddChatForm);var mapStateToProps=function mapStateToProps(state){return{token:state.auth.token,username:state.auth.username};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{closeAddChatPopup:function closeAddChatPopup(){return dispatch(navActions.closeAddChatPopup());},getUserChats:function getUserChats(username,token){return dispatch(messageActions.getUserChats(username,token));}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(AddChatForm));","map":{"version":3,"sources":["E:/Programming/React/For Merging Chat-App/proj/src/containers/Form.js"],"names":["React","Form","Button","Select","axios","connect","withRouter","navActions","messageActions","FormItem","Item","hasErrors","fieldsError","Object","keys","some","field","HorizontalAddChatForm","state","usernames","error","handleChange","value","setState","handleSubmit","e","preventDefault","props","form","validateFields","err","values","combined","username","console","log","defaults","headers","Authorization","token","post","messages","participants","then","res","history","push","data","memebers_name","closeAddChatPopup","getUserChats","catch","getFieldDecorator","getFieldsError","getFieldError","isFieldTouched","userNameError","rules","required","message","width","Component","AddChatForm","create","mapStateToProps","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Form, Button, Select } from \"antd\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport * as navActions from \"../store/actions/nav\";\r\nimport * as messageActions from \"../store/actions/message\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nfunction hasErrors(fieldsError) {\r\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nclass HorizontalAddChatForm extends React.Component {\r\n  state = {\r\n    usernames: [],\r\n    error: null\r\n  };\r\n\r\n  handleChange = value => {\r\n    this.setState({\r\n      usernames: value\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.form.validateFields();\r\n  }\r\n\r\n  handleSubmit = e => {\r\n\r\n    const { usernames } = this.state;\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const combined = [...usernames, this.props.username];\r\n        console.log(combined);\r\n        axios.defaults.headers = {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Token ${this.props.token}`\r\n        };\r\n        axios\r\n          .post(\"http://127.0.0.1:8000/chat/create/\", {\r\n            messages: [],\r\n            participants: combined\r\n          })\r\n\r\n          .then(res => {\r\n            this.props.history.push(`/${res.data.memebers_name}`);\r\n            this.props.closeAddChatPopup();\r\n            this.props.getUserChats(this.props.username, this.props.token);\r\n          })\r\n          .catch(err => {\r\n            console.error(err);\r\n            this.setState({\r\n              error: \"username doesn't exist.....! \"\r\n            });\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      getFieldDecorator,\r\n      getFieldsError,\r\n      getFieldError,\r\n      isFieldTouched\r\n    } = this.props.form;\r\n\r\n    const userNameError =\r\n      isFieldTouched(\"userName\") && getFieldError(\"userName\");\r\n    return (\r\n      <Form layout=\"inline\" onSubmit={this.handleSubmit}>\r\n        {this.state.error ? `${this.state.error}` : null}\r\n        <FormItem\r\n          validateStatus={userNameError ? \"error\" : \"\"}\r\n          help={userNameError || \"\"}\r\n        >\r\n          {getFieldDecorator(\"userName\", {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message:\r\n                  \"Please input the username of the person you want to chat with\"\r\n              }\r\n            ]\r\n          })(\r\n            <Select\r\n              mode=\"tags\"\r\n              style={{ width: \"100%\" }}\r\n              placeholder=\"Tags Mode\"\r\n              onChange={this.handleChange}\r\n            >\r\n              {[]}\r\n            </Select>\r\n          )}\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            disabled={hasErrors(getFieldsError())}\r\n          >\r\n            Start a chat\r\n          </Button>\r\n        </FormItem>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nconst AddChatForm = Form.create()(HorizontalAddChatForm);\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    token: state.auth.token,\r\n    username: state.auth.username\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\r\n    getUserChats: (username, token) =>\r\n      dispatch(messageActions.getUserChats(username, token))\r\n  };\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(AddChatForm)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}